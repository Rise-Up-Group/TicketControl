<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="/">TicketControl</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav" style="width: 100%">
            <li class="nav-item active">
                <a class="nav-link" href="/">Dashboard</a>
            </li>
            {% if user.is_authenticated %}
                <li class="nav-item">
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" id="dropdownMenu2" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">Ticket</a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                            <a class="dropdown-item" href="/ticket/new">Open Ticket</a>
                            <a class="dropdown-item" href="/ticket/my">My Tickets</a>
                            {% if perms.ticketcontrol.change_ticket %}
                                <a class="dropdown-item" href="/ticket/manage">Manage Tickets</a>
                            {% endif %}
                        </div>
                    </div>
                </li>
            {% endif %}
            {% if perms.ticketcontrol.admin_general %}
                <li class="nav-item">
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" id="dropdownMenu2" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">Administration</a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                            <a class="dropdown-item" href="{% url 'manage_categories' %}">Categories</a>
                            {% if perms.ticketcontrol.change_user or perms.ticketcontrol.add_user %}
                                <a class="dropdown-item" href="/user/manage">Users</a>
                            {% endif %}
                            {% if user.is_superuser %}
                                <a class="dropdown-item" href="/group/manage">Groups</a>
                                <a class="dropdown-item" href="{% url 'settings' %}">System settings</a>
                            {% endif %}
                        </div>
                    </div>
                </li>
            {% endif %}
            {% if user.is_staff %}
                <li class="nav-item">
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" id="dropdownMenu2" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">Development</a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                            <a class="dropdown-item" href="/djangoadmin">Django Admin</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/djangoadmin/ticketcontrol/attachment/">Attachment</a>
                            <a class="dropdown-item" href="/djangoadmin/ticketcontrol/category/">Category</a>
                            <a class="dropdown-item" href="/djangoadmin/ticketcontrol/comment/">Comment</a>
                            <a class="dropdown-item" href="/djangoadmin/ticketcontrol/ticket/">Ticket</a>
                            <a class="dropdown-item" href="/djangoadmin/ticketcontrol/user/">User</a>
                        </div>
                    </div>
                </li>
            {% endif %}

        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li class="pull-right">
                {% if user.is_authenticated %}
                    <div class="dropdown">
                        <a class="dropdown-toggle nav-link" id="dropdownMenu2" data-toggle="dropdown"
                           aria-haspopup="true" aria-expanded="false">{{ user.username }}</a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">
                            <a class="dropdown-item" href="{% url 'user_details' id=user.id %}">My Profile</a>
                            <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                        </div>
                    </div>
                {% else %}
                    <a class="nav-link text-light" href="{% url 'login' %}">Login</a>
                {% endif %}
            </li>
        </ul>
    </div>
</nav>

